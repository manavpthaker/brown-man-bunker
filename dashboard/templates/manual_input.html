<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manual Data Input - Household Resilience Monitor</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/dashboard.css') }}">
    <style>
        .input-section {
            background: var(--card-bg);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .data-source {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px;
            background: #f5f5f5;
            border-radius: 4px;
            margin-bottom: 10px;
        }
        
        .source-link {
            color: var(--primary-color);
            text-decoration: none;
            font-weight: bold;
        }
        
        .source-link:hover {
            text-decoration: underline;
        }
        
        .input-form {
            margin-top: 15px;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        
        .form-group input, .form-group select {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        
        .btn-primary {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
        }
        
        .btn-primary:hover {
            background: #0056b3;
        }
        
        .btn-secondary {
            background: #6c757d;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            margin-left: 10px;
        }
        
        .success-message {
            background: #d4edda;
            color: #155724;
            padding: 10px;
            border-radius: 4px;
            margin-top: 10px;
            display: none;
        }
        
        .scraper-status {
            padding: 10px;
            background: #e9ecef;
            border-radius: 4px;
            margin-top: 10px;
            display: none;
        }
        
        .instructions {
            background: #fff3cd;
            border: 1px solid #ffeeba;
            color: #856404;
            padding: 15px;
            border-radius: 4px;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Manual Data Input</h1>
            <nav>
                <a href="/">Dashboard</a> | 
                <a href="/procedures">Emergency Procedures</a> | 
                <a href="/manual-input">Data Input</a>
            </nav>
        </header>

        <div class="instructions">
            <h3>üìä Keep Your Monitoring Current</h3>
            <p>Some indicators require manual data collection. Update them weekly for accurate threat assessment.</p>
        </div>

        <!-- ICE Detention -->
        <div class="input-section">
            <h2>üè¢ ICE Detention Fill Rate</h2>
            <div class="data-source">
                <span>Data Source:</span>
                <a href="https://www.ice.gov/detain/detention-management" target="_blank" class="source-link">
                    ICE Detention Statistics ‚Üí
                </a>
                <span>(Updated Weekly)</span>
            </div>
            <p>Look for the latest "Detention FY20XX Statistics" PDF. Find the total detained population and capacity.</p>
            
            <form class="input-form" onsubmit="updateICEDetention(event)">
                <div class="form-group">
                    <label for="ice-detained">Current Detained Population:</label>
                    <input type="number" id="ice-detained" placeholder="e.g., 25500" required>
                </div>
                <div class="form-group">
                    <label for="ice-capacity">Total Bed Capacity:</label>
                    <input type="number" id="ice-capacity" placeholder="e.g., 34000" required>
                </div>
                <button type="submit" class="btn-primary">Update ICE Data</button>
            </form>
            <div id="ice-success" class="success-message"></div>
        </div>

        <!-- DoD Autonomy -->
        <div class="input-section">
            <h2>ü§ñ DoD Autonomous Systems</h2>
            <div class="data-source">
                <span>Data Source:</span>
                <a href="https://sam.gov/search/?index=opp&page=1&pageSize=25&sort=-modifiedDate&sfm%5Bstatus%5D%5Bis_active%5D=true&sfm%5Bkeywords%5D%5B0%5D%5Bvalue%5D=autonomous%20decision&sfm%5Bkeywords%5D%5B0%5D%5Bkey%5D=autonomous%20decision" target="_blank" class="source-link">
                    SAM.gov Autonomous Systems ‚Üí
                </a>
                <span>(Check Weekly)</span>
            </div>
            <p>Search for "autonomous decision" or "human veto" in defense contracts. Count active solicitations.</p>
            
            <form class="input-form" onsubmit="updateDoDAutonomy(event)">
                <div class="form-group">
                    <label for="dod-status">Autonomous Decision Policy:</label>
                    <select id="dod-status" required>
                        <option value="">Select current status...</option>
                        <option value="HUMAN VETO">Human Veto Required (GREEN)</option>
                        <option value="PILOT">Pilot Programs Active (AMBER)</option>
                        <option value="REMOVED">Veto Requirement Removed (RED)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="dod-count">Number of Autonomous Systems:</label>
                    <input type="number" id="dod-count" placeholder="e.g., 350" required>
                </div>
                <button type="submit" class="btn-primary">Update DoD Data</button>
            </form>
            <div id="dod-success" class="success-message"></div>
        </div>

        <!-- mBridge Settlement -->
        <div class="input-section">
            <h2>üí± mBridge Gulf Crude Settlement</h2>
            <div class="data-source">
                <span>Data Source:</span>
                <a href="https://www.bis.org/about/bisih/topics/cbdc/mcbdc_bridge.htm" target="_blank" class="source-link">
                    BIS mBridge Project ‚Üí
                </a>
                <span>(Monthly Updates)</span>
            </div>
            <p>Check for monthly transaction volumes in the mBridge CBDC system, especially oil/energy trades.</p>
            
            <form class="input-form" onsubmit="updateMBridge(event)">
                <div class="form-group">
                    <label for="mbridge-volume">Monthly Transaction Volume (Billions USD):</label>
                    <input type="number" step="0.1" id="mbridge-volume" placeholder="e.g., 15.5" required>
                </div>
                <div class="form-group">
                    <label for="mbridge-participants">Active Participants:</label>
                    <input type="text" id="mbridge-participants" placeholder="China, UAE, Thailand, Hong Kong" value="China, UAE, Thailand, Hong Kong">
                </div>
                <button type="submit" class="btn-primary">Update mBridge Data</button>
            </form>
            <div id="mbridge-success" class="success-message"></div>
        </div>

        <!-- School Closures -->
        <div class="input-section">
            <h2>üè´ School District Closures</h2>
            <div class="data-source">
                <span>Check Major Districts:</span>
            </div>
            <ul>
                <li><a href="https://www.schools.nyc.gov/" target="_blank" class="source-link">NYC Schools</a> (1M students)</li>
                <li><a href="https://www.lausd.net/" target="_blank" class="source-link">LA Unified</a> (600K students)</li>
                <li><a href="https://www.cps.edu/" target="_blank" class="source-link">Chicago Public</a> (340K students)</li>
                <li><a href="https://www.houstonisd.org/" target="_blank" class="source-link">Houston ISD</a> (200K students)</li>
                <li><a href="https://www.phxschools.org/" target="_blank" class="source-link">Phoenix Union</a> (180K students)</li>
            </ul>
            <p>Count non-weather closures only. Look for staff shortages, safety concerns, or infrastructure issues.</p>
            
            <form class="input-form" onsubmit="updateSchoolClosures(event)">
                <div class="form-group">
                    <label for="school-closures">Number of District-Days Closed:</label>
                    <input type="number" id="school-closures" placeholder="e.g., 2" required>
                </div>
                <div class="form-group">
                    <label for="school-reason">Primary Closure Reason:</label>
                    <select id="school-reason" required>
                        <option value="">Select reason...</option>
                        <option value="staff_shortage">Staff Shortage</option>
                        <option value="safety_concern">Safety Concerns</option>
                        <option value="infrastructure">Infrastructure Failure</option>
                        <option value="health_outbreak">Health Outbreak</option>
                    </select>
                </div>
                <button type="submit" class="btn-primary">Update School Data</button>
            </form>
            <div id="school-success" class="success-message"></div>
        </div>

        <!-- Pharmacy Shortages with Scraper -->
        <div class="input-section">
            <h2>üíä Critical Drug Shortages</h2>
            <div class="data-source">
                <span>Data Source:</span>
                <a href="https://www.accessdata.fda.gov/scripts/drugshortages/default.cfm" target="_blank" class="source-link">
                    FDA Drug Shortage Database ‚Üí
                </a>
                <button class="btn-secondary" onclick="scrapeFDAData()">Auto-Fetch Data</button>
            </div>
            <div id="fda-scraper-status" class="scraper-status"></div>
            
            <p>Count shortages of: antidepressants, ADHD meds, antibiotics, blood pressure meds, insulin.</p>
            
            <form class="input-form" onsubmit="updatePharmacyShortages(event)">
                <div class="form-group">
                    <label for="pharma-mental">Mental Health Meds in Shortage:</label>
                    <input type="number" id="pharma-mental" placeholder="e.g., 3" required>
                </div>
                <div class="form-group">
                    <label for="pharma-adhd">ADHD Meds in Shortage:</label>
                    <input type="number" id="pharma-adhd" placeholder="e.g., 4" required>
                </div>
                <div class="form-group">
                    <label for="pharma-antibiotics">Antibiotics in Shortage:</label>
                    <input type="number" id="pharma-antibiotics" placeholder="e.g., 2" required>
                </div>
                <button type="submit" class="btn-primary">Update Pharmacy Data</button>
            </form>
            <div id="pharma-success" class="success-message"></div>
        </div>

        <!-- AGI Milestones -->
        <div class="input-section">
            <h2>üß† AGI Development Milestones</h2>
            <div class="data-source">
                <span>Monitor These Sources:</span>
            </div>
            <ul>
                <li><a href="https://arxiv.org/list/cs.AI/recent" target="_blank" class="source-link">arXiv AI Papers</a></li>
                <li><a href="https://openai.com/blog" target="_blank" class="source-link">OpenAI Blog</a></li>
                <li><a href="https://www.anthropic.com/news" target="_blank" class="source-link">Anthropic News</a></li>
                <li><a href="https://deepmind.google/discover/blog/" target="_blank" class="source-link">DeepMind Blog</a></li>
            </ul>
            <p>Track major capability announcements and breakthroughs.</p>
            
            <form class="input-form" onsubmit="updateAGIMilestones(event)">
                <div class="form-group">
                    <label>
                        <input type="checkbox" id="agi-autonomous"> 
                        24+ Hour Autonomous Operation Achieved
                    </label>
                </div>
                <div class="form-group">
                    <label>
                        <input type="checkbox" id="agi-self-improve"> 
                        Self-Improvement/Code Generation Demonstrated
                    </label>
                </div>
                <div class="form-group">
                    <label>
                        <input type="checkbox" id="agi-general"> 
                        90%+ on General Reasoning Benchmarks
                    </label>
                </div>
                <div class="form-group">
                    <label>
                        <input type="checkbox" id="agi-economic"> 
                        Can Perform 50%+ of Knowledge Work
                    </label>
                </div>
                <button type="submit" class="btn-primary">Update AGI Status</button>
            </form>
            <div id="agi-success" class="success-message"></div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/manual_input.js') }}"></script>
</body>
</html>